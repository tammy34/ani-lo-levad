<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>×× ×™ ×œ× ×œ×‘×“ ğŸ’™</title>
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&family=Rubik:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Rubik', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            overflow-x: hidden;
        }

        @media (min-width: 600px) {
            body {
                padding: 20px;
            }
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            animation: fadeInDown 0.8s ease;
            padding: 10px;
        }

        @media (min-width: 600px) {
            .header {
                margin-bottom: 30px;
                padding: 0;
            }
        }

        .header h1 {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.2);
        }

        @media (min-width: 600px) {
            .header h1 {
                font-size: 2.5em;
            }
        }

        .header p {
            font-size: 1em;
            opacity: 0.95;
        }

        @media (min-width: 600px) {
            .header p {
                font-size: 1.1em;
            }
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: fadeInUp 0.8s ease;
        }

        @media (min-width: 600px) {
            .card {
                border-radius: 25px;
                padding: 25px;
                margin-bottom: 20px;
            }
        }

        .emergency-section {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            animation-delay: 0.1s;
        }

        .emergency-title {
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }

        .emergency-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        @media (min-width: 600px) {
            .emergency-buttons {
                gap: 10px;
            }
        }

        .emergency-btn {
            background: white;
            color: #ff6b6b;
            border: none;
            border-radius: 12px;
            padding: 12px 8px;
            font-size: 0.8em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Rubik', sans-serif;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            line-height: 1.4;
        }

        @media (min-width: 600px) {
            .emergency-btn {
                border-radius: 15px;
                padding: 15px 10px;
                font-size: 0.9em;
            }
        }

        .emergency-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .emergency-btn:active {
            transform: translateY(-1px);
        }

        .mood-section {
            animation-delay: 0.2s;
        }

        .section-title {
            font-size: 1.4em;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 15px;
            text-align: center;
        }

        .mood-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        @media (max-width: 400px) {
            .mood-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }
        }

        .mood-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            border-radius: 15px;
            padding: 10px 5px;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @media (max-width: 400px) {
            .mood-btn {
                font-size: 1.8em;
                padding: 8px 4px;
                border-radius: 12px;
            }
        }

        .mood-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .mood-btn.selected {
            transform: scale(1.15);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            animation: pulse 1.5s infinite;
        }

        .encouragement-box {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            font-size: 1.1em;
            font-weight: 500;
            color: #5a67d8;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.5s ease;
        }

        .courage-section {
            animation-delay: 0.3s;
        }

        .courage-counter {
            text-align: center;
            margin: 20px 0;
        }

        .courage-number {
            font-size: 4em;
            font-weight: 700;
            color: #667eea;
            text-shadow: 2px 2px 10px rgba(102, 126, 234, 0.3);
        }

        .courage-label {
            font-size: 1.2em;
            color: #666;
            margin-top: -10px;
        }

        .star-animation {
            display: inline-block;
            font-size: 2em;
            animation: rotate 2s linear infinite;
        }

        .activities-section {
            animation-delay: 0.4s;
        }

        .activity-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        @media (max-width: 400px) {
            .activity-grid {
                gap: 10px;
            }
        }

        .activity-card {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        @media (min-width: 600px) {
            .activity-card {
                border-radius: 20px;
                padding: 20px;
            }
        }

        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .activity-card:active {
            transform: translateY(-2px);
        }

        .activity-icon {
            font-size: 2.5em;
            margin-bottom: 8px;
        }

        @media (min-width: 600px) {
            .activity-icon {
                font-size: 3em;
                margin-bottom: 10px;
            }
        }

        .activity-title {
            font-weight: 600;
            color: #764ba2;
            font-size: 0.95em;
        }

        @media (min-width: 600px) {
            .activity-title {
                font-size: 1em;
            }
        }

        .hotline-section {
            animation-delay: 0.5s;
            background: linear-gradient(135deg, #a8e063 0%, #56ab2f 100%);
            color: white;
        }

        .hotline-btn {
            background: white;
            color: #56ab2f;
            border: none;
            border-radius: 15px;
            padding: 18px;
            width: 100%;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Rubik', sans-serif;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            margin-top: 10px;
            min-height: 50px;
            touch-action: manipulation;
        }

        .hotline-btn:active {
            transform: scale(0.98);
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        @media (min-width: 600px) {
            .hotline-btn {
                padding: 20px;
                min-height: auto;
            }

            .hotline-btn:hover {
                transform: scale(1.05);
                box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            }
        }

        /* Improve touch targets */
        button, .mood-btn, .emergency-btn, .activity-card, .contact-remove {
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
            touch-action: manipulation;
        }

        /* Prevent text selection on buttons */
        button, .mood-btn, .emergency-btn {
            user-select: none;
            -webkit-user-select: none;
        }

        .breathing-exercise {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(102, 126, 234, 0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .breathing-exercise.active {
            display: flex;
        }

        .breathing-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: white;
            box-shadow: 0 0 50px rgba(255,255,255,0.5);
            transform: scale(1);
            transition: transform 4s ease-in-out;
        }

        .breathing-text {
            color: white;
            font-size: 1.5em;
            font-weight: 600;
            margin-top: 30px;
            text-align: center;
        }

        .close-btn {
            position: absolute;
            top: 30px;
            right: 30px;
            background: white;
            color: #667eea;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5em;
            cursor: pointer;
            font-weight: 600;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1.15); }
            50% { transform: scale(1.25); }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .floating-hearts {
            position: fixed;
            pointer-events: none;
            font-size: 2em;
            animation: floatUp 3s ease-in-out;
            opacity: 0;
        }

        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-200px) scale(1.5);
            }
        }

        .contact-card {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .contact-info {
            flex: 1;
        }

        .contact-name {
            font-weight: 600;
            color: #764ba2;
            font-size: 1.1em;
            margin-bottom: 3px;
        }

        .contact-phone {
            color: #666;
            font-size: 0.9em;
            direction: ltr;
            text-align: left;
        }

        .contact-remove {
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .contact-remove:hover {
            background: #ff5252;
            transform: scale(1.1);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 25px;
            padding: 25px;
            max-width: 400px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 50px rgba(0,0,0,0.3);
            animation: slideUp 0.3s ease;
        }

        @media (max-width: 400px) {
            .modal-content {
                width: 95%;
                padding: 20px;
                border-radius: 20px;
            }
        }

        .modal-title {
            font-size: 1.4em;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }

        @media (max-width: 400px) {
            .modal-title {
                font-size: 1.2em;
                margin-bottom: 15px;
            }
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            font-family: 'Rubik', sans-serif;
            margin-bottom: 15px;
            direction: rtl;
            box-sizing: border-box;
        }

        @media (max-width: 400px) {
            .form-input {
                padding: 10px;
                font-size: 0.95em;
                margin-bottom: 12px;
            }
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        @media (max-width: 400px) {
            .modal-buttons {
                gap: 8px;
                margin-top: 15px;
            }
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Rubik', sans-serif;
            transition: all 0.3s ease;
            min-width: 100px;
        }

        @media (max-width: 400px) {
            .modal-btn {
                padding: 10px;
                font-size: 0.95em;
                min-width: 80px;
            }
        }

        .modal-btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .modal-btn-secondary {
            background: #f0f0f0;
            color: #666;
        }

        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ’™ ×× ×™ ×œ× ×œ×‘×“ ğŸ’™</h1>
            <p>××ª×” ×œ× ×œ×‘×“, ×× ×—× ×• ××™×ª×š! ğŸŒŸ</p>
        </div>

        <!-- Emergency Contacts Setup -->
        <div class="card" style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); animation-delay: 0.05s;">
            <div class="section-title" style="color: #764ba2;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ×× ×©×™ ×§×©×¨ ×œ×©×¢×ª ×—×™×¨×•×</div>
            <p style="text-align: center; color: #764ba2; margin-bottom: 15px;">
                ×”×’×“×™×¨×• ××™ ×™×§×‘×œ ×”×ª×¨××” ×›×©××ª× ×¦×¨×™×›×™× ×¢×–×¨×”
            </p>
            <div id="contactsList" style="margin-bottom: 15px;">
                <!-- Contacts will be added here -->
            </div>
            <button class="hotline-btn" onclick="addEmergencyContact()" style="background: #764ba2; color: white; margin-top: 10px;">
                â• ×”×•×¡×£ ××™×© ×§×©×¨
            </button>
        </div>

        <!-- Emergency Buttons Section -->
        <div class="card emergency-section">
            <div class="emergency-title">ğŸš¨ ×›×¤×ª×•×¨×™ ×—×™×¨×•× ğŸš¨</div>
            <p style="text-align: center; margin-bottom: 15px; font-size: 0.9em;">
                ×œ×—×™×¦×” ×ª×©×œ×— ×”×ª×¨××” ×œ×× ×©×™ ×”×§×©×¨ ×©×œ×š ×•×ª×—×™×™×’ ×œ××¡×¤×¨ ×”×—×™×¨×•×
            </p>
            <div class="emergency-buttons">
                <button class="emergency-btn" onclick="callEmergency('police')">
                    ğŸ‘®<br>××©×˜×¨×”<br>100
                </button>
                <button class="emergency-btn" onclick="callEmergency('mada')">
                    ğŸš‘<br>××“"×<br>101
                </button>
                <button class="emergency-btn" onclick="callEmergency('fire')">
                    ğŸš’<br>×›×™×‘×•×™ ××©<br>102
                </button>
            </div>
        </div>

        <!-- Mood Tracker -->
        <div class="card mood-section">
            <div class="section-title">××™×š ××ª×” ××¨×’×™×© ×”×™×•×? ğŸ­</div>
            <div class="mood-grid">
                <button class="mood-btn" onclick="selectMood(this, 'ğŸ˜Š')">ğŸ˜Š</button>
                <button class="mood-btn" onclick="selectMood(this, 'ğŸ˜¢')">ğŸ˜¢</button>
                <button class="mood-btn" onclick="selectMood(this, 'ğŸ˜ ')">ğŸ˜ </button>
                <button class="mood-btn" onclick="selectMood(this, 'ğŸ˜°')">ğŸ˜°</button>
                <button class="mood-btn" onclick="selectMood(this, 'ğŸ¤—')">ğŸ¤—</button>
                <button class="mood-btn" onclick="selectMood(this, 'ğŸ˜”')">ğŸ˜”</button>
                <button class="mood-btn" onclick="selectMood(this, 'ğŸ¥º')">ğŸ¥º</button>
                <button class="mood-btn" onclick="selectMood(this, 'ğŸ’ª')">ğŸ’ª</button>
            </div>
            <div class="encouragement-box" id="encouragementBox">
                ×‘×—×¨ ××™×š ××ª×” ××¨×’×™×© ×•×ª×§×‘×œ ××¡×¨ ××™×•×—×“ ğŸ’Œ
            </div>
        </div>

        <!-- Courage Points -->
        <div class="card courage-section">
            <div class="section-title">× ×§×•×“×•×ª ×”××•××¥ ×©×œ×š! <span class="star-animation">â­</span></div>
            <div class="courage-counter">
                <div class="courage-number" id="couragePoints">0</div>
                <div class="courage-label">× ×§×•×“×•×ª ××•××¥</div>
            </div>
            <button class="hotline-btn" onclick="addCouragePoint()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                ×”×™×” ×œ×™ ×™×•× ×××ª×’×¨ ××‘×œ ×¢×‘×¨×ª×™ ××•×ª×•! ğŸ’ª
            </button>
        </div>

        <!-- Activities -->
        <div class="card activities-section">
            <div class="section-title">×¤×¢×™×œ×•×™×•×ª ×©×™×¢×–×¨×• ×œ×š ğŸŒˆ</div>
            <div class="activity-grid">
                <div class="activity-card" onclick="startBreathing()">
                    <div class="activity-icon">ğŸŒ¬ï¸</div>
                    <div class="activity-title">×ª×¨×’×™×œ × ×©×™××”</div>
                </div>
                <div class="activity-card" onclick="showStory()">
                    <div class="activity-icon">ğŸ“–</div>
                    <div class="activity-title">×¡×™×¤×•×¨ ××¢×•×“×“</div>
                </div>
                <div class="activity-card" onclick="showGame()">
                    <div class="activity-icon">ğŸ®</div>
                    <div class="activity-title">××©×—×§ ×›×™×£</div>
                </div>
                <div class="activity-card" onclick="showTips()">
                    <div class="activity-icon">ğŸ’¡</div>
                    <div class="activity-title">×˜×™×¤×™×</div>
                </div>
            </div>
        </div>

        <!-- Hotline -->
        <div class="card hotline-section">
            <div class="section-title">×¦×¨×™×š ×œ×“×‘×¨ ×¢× ××™×©×”×•? ğŸ’¬</div>
            <p style="text-align: center; margin-bottom: 10px;">×¢×¨"×Ÿ - ×¢×–×¨×” ×¨××©×•× ×” × ×¤×©×™×ª</p>
            <button class="hotline-btn" onclick="callHotline()">
                ğŸ“ ×—×™×™×’ ×œ×¢×¨"×Ÿ - 1201
            </button>
            <button class="hotline-btn" onclick="whatsappEran()" style="background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); color: white; margin-top: 10px;">
                ğŸ’¬ ×©×œ×— ×”×•×“×¢×” ×‘×•×•××˜×¡××¤ ×œ×¢×¨"×Ÿ
            </button>
            <p style="text-align: center; margin-top: 10px; font-size: 0.9em;">×–××™× ×™× 24/7 ×œ×©×™×—×” â€¢ ××ª×” ×œ× ×œ×‘×“!</p>
        </div>

        <!-- Emergency WhatsApp Alert -->
        <div class="card" style="background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%); animation-delay: 0.6s;">
            <div class="section-title" style="color: white;">âš¡ ×”×ª×¨××ª ×—×™×¨×•× ××™×™×“×™×ª</div>
            <p style="text-align: center; color: white; margin-bottom: 15px; font-weight: 500;">
                ×©×œ×™×—×ª ×”×•×“×¢×ª WhatsApp ××™×™×“×™×ª ×œ×›×œ ×× ×©×™ ×”×§×©×¨ ×©×”×’×“×¨×ª
            </p>
            <button class="hotline-btn" onclick="sendEmergencyWhatsApp()" style="background: white; color: #FF6B6B; font-weight: 700; font-size: 1.1em;">
                ğŸš¨ ×©×œ×— ×”×ª×¨××ª ×—×™×¨×•× ×¢×›×©×™×•!
            </button>
        </div>
    </div>

    <!-- Breathing Exercise Overlay -->
    <div class="breathing-exercise" id="breathingExercise">
        <button class="close-btn" onclick="stopBreathing()">âœ•</button>
        <div class="breathing-circle" id="breathingCircle"></div>
        <div class="breathing-text" id="breathingText">×”×ª×›×•× ×Ÿ...</div>
    </div>

    <!-- Add Contact Modal -->
    <div class="modal" id="contactModal">
        <div class="modal-content">
            <div class="modal-title">â• ×”×•×¡×¤×ª ××™×© ×§×©×¨</div>
            <input type="text" id="contactName" class="form-input" placeholder="×©× (×œ×“×•×’××”: ×××, ××‘×, ××—×•×ª)">
            <input type="tel" id="contactPhone" class="form-input" placeholder="××¡×¤×¨ ×˜×œ×¤×•×Ÿ (×œ×“×•×’××”: 050-1234567)" dir="ltr">
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-primary" onclick="saveContact()">ğŸ’¾ ×©××•×¨</button>
                <button class="modal-btn modal-btn-secondary" onclick="closeContactModal()">âœ• ×‘×™×˜×•×œ</button>
            </div>
        </div>
    </div>

    <!-- Content Modal (for stories, games, tips) -->
    <div class="modal" id="contentModal">
        <div class="modal-content" style="max-height: 80vh; overflow-y: auto;">
            <button class="close-btn" onclick="closeContentModal()" style="position: absolute; top: 15px; left: 15px; width: 40px; height: 40px; font-size: 1.2em;">âœ•</button>
            <div id="contentTitle" class="modal-title" style="margin-top: 10px;"></div>
            <div id="contentBody" style="text-align: right; line-height: 1.8; white-space: pre-wrap; padding: 10px; font-size: 1.05em;"></div>
        </div>
    </div>

    <script>
        // Load courage points from localStorage
        let couragePoints = parseInt(localStorage.getItem('couragePoints') || '0');
        document.getElementById('couragePoints').textContent = couragePoints;

        // Emergency Contacts Management
        let emergencyContacts = JSON.parse(localStorage.getItem('emergencyContacts') || '[]');

        // Display emergency contacts on load
        displayContacts();

        function displayContacts() {
            const contactsList = document.getElementById('contactsList');
            if (emergencyContacts.length === 0) {
                contactsList.innerHTML = '';
                return;
            }
            
            contactsList.innerHTML = emergencyContacts.map((contact, index) => `
                <div class="contact-card">
                    <div class="contact-info">
                        <div class="contact-name">${contact.name}</div>
                        <div class="contact-phone">${contact.phone}</div>
                    </div>
                    <button class="contact-remove" onclick="removeContact(${index})">ğŸ—‘ï¸</button>
                </div>
            `).join('');
        }

        function addEmergencyContact() {
            document.getElementById('contactModal').classList.add('active');
        }

        function closeContactModal() {
            document.getElementById('contactModal').classList.remove('active');
            document.getElementById('contactName').value = '';
            document.getElementById('contactPhone').value = '';
        }

        function saveContact() {
            const name = document.getElementById('contactName').value.trim();
            const phone = document.getElementById('contactPhone').value.trim();
            
            if (!name || !phone) {
                alert('âš ï¸ × × ×œ××œ× ××ª ×›×œ ×”×©×“×•×ª');
                return;
            }
            
            emergencyContacts.push({ name, phone });
            localStorage.setItem('emergencyContacts', JSON.stringify(emergencyContacts));
            displayContacts();
            closeContactModal();
            
            alert('âœ… ××™×© ×”×§×©×¨ × ×©××¨ ×‘×”×¦×œ×—×”!\n\n' + 
                  '×›×¢×ª ×›×©×ª×œ×—×¥ ×¢×œ ×›×¤×ª×•×¨ ×—×™×¨×•×, ' + name + ' ×™×§×‘×œ ×”×•×“×¢×ª WhatsApp! ğŸ’™');
        }

        function removeContact(index) {
            if (confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ××™×© ×”×§×©×¨?')) {
                emergencyContacts.splice(index, 1);
                localStorage.setItem('emergencyContacts', JSON.stringify(emergencyContacts));
                displayContacts();
            }
        }

        function sendWhatsAppAlert(emergencyType) {
            if (emergencyContacts.length === 0) {
                return; // No contacts to notify
            }
            
            const emergencyNames = {
                police: '××©×˜×¨×” (100)',
                mada: '××“"× (101)',
                fire: '×›×™×‘×•×™ ××© (102)'
            };
            
            const message = `ğŸš¨ ×”×ª×¨××ª ×—×™×¨×•×! ğŸš¨%0A%0A` +
                          `×”×™×œ×“/×” ×©×œ×›× ×œ×—×¥ ×¢×œ ×›×¤×ª×•×¨ ×”×—×™×¨×•×:%0A` +
                          `${emergencyNames[emergencyType]}%0A%0A` +
                          `âš ï¸ ×× × ×”×ª×§×©×¨×• ××œ×™×•/×” ××™×“!%0A` +
                          `ğŸ“… ${new Date().toLocaleString('he-IL')}%0A%0A` +
                          `× ×©×œ×— ×: ×× ×™ ×œ× ×œ×‘×“ ğŸ’™`;
            
            // Open WhatsApp for each contact
            emergencyContacts.forEach((contact, index) => {
                setTimeout(() => {
                    const whatsappUrl = `https://wa.me/${contact.phone.replace(/[^0-9]/g, '')}?text=${message}`;
                    window.open(whatsappUrl, '_blank');
                }, index * 1000); // Delay between contacts
            });
        }

        function callEmergency(type) {
            const numbers = {
                police: '100',
                mada: '101',
                fire: '102'
            };
            
            const emergencyNames = {
                police: '××©×˜×¨×”',
                mada: '××“"×',
                fire: '×›×™×‘×•×™ ××©'
            };
            
            // Send WhatsApp alerts to emergency contacts
            sendWhatsAppAlert(type);
            
            // Show notification
            if (emergencyContacts.length > 0) {
                alert(`ğŸ“± ×”×•×“×¢×ª WhatsApp × ×©×œ×—×” ×œ×× ×©×™ ×”×§×©×¨ ×©×œ×š!\n\n` +
                      `ğŸš¨ ×›×¢×ª ××—×™×™×’ ×œ${emergencyNames[type]}...`);
            }
            
            // Direct call to emergency number
            window.location.href = `tel:${numbers[type]}`;
        }

        function callHotline() {
            // Direct call to ERAN hotline
            window.location.href = 'tel:1201';
        }

        function whatsappEran() {
            // WhatsApp to ERAN
            const eranNumber = '972528451201'; // 052-845-1201 in international format
            const message = `×©×œ×•×, ×× ×™ ×¦×¨×™×š/×” ×¢×–×¨×” ×•×ª××™×›×” ×¨×’×©×™×ª.`;
            const whatsappUrl = `https://wa.me/${eranNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        function sendEmergencyWhatsApp() {
            if (emergencyContacts.length === 0) {
                alert('âš ï¸ ×œ× ×”×’×“×¨×ª ×× ×©×™ ×§×©×¨ ×œ×—×™×¨×•×!\n\n×× × ×”×•×¡×£ ×× ×©×™ ×§×©×¨ ×§×•×“×.');
                return;
            }
            
            if (!confirm('ğŸš¨ ×”×× ×œ×©×œ×•×— ×”×ª×¨××ª ×—×™×¨×•× ×œ×›×œ ×× ×©×™ ×”×§×©×¨?\n\n×”× ×™×§×‘×œ×• ×”×•×“×¢×” ×©××ª×” ×¦×¨×™×š ×¢×–×¨×” ××™×™×“×™×ª!')) {
                return;
            }
            
            const message = `ğŸš¨ ×”×ª×¨××ª ×—×™×¨×•×! ğŸš¨%0A%0A` +
                          `×”×™×œ×“/×” ×©×œ×›× ×©×œ×— ×”×ª×¨××ª ×—×™×¨×•×!%0A%0A` +
                          `âš ï¸ ×× × ×”×ª×§×©×¨×• ××œ×™×•/×” ××™×“!%0A` +
                          `ğŸ“… ${new Date().toLocaleString('he-IL')}%0A%0A` +
                          `ğŸ’™ × ×©×œ×— ×: ×× ×™ ×œ× ×œ×‘×“`;
            
            let successCount = 0;
            emergencyContacts.forEach((contact, index) => {
                setTimeout(() => {
                    const phone = contact.phone.replace(/[^0-9]/g, '');
                    const phoneFormatted = phone.startsWith('0') ? '972' + phone.substring(1) : phone;
                    const whatsappUrl = `https://wa.me/${phoneFormatted}?text=${message}`;
                    window.open(whatsappUrl, '_blank');
                    successCount++;
                    
                    if (index === emergencyContacts.length - 1) {
                        setTimeout(() => {
                            alert(`âœ… × ×©×œ×—×• ${successCount} ×”×•×“×¢×•×ª ×—×™×¨×•×!\n\n×× ×©×™ ×”×§×©×¨ ×©×œ×š ×§×™×‘×œ×• ×”×ª×¨××”! ğŸ’™`);
                        }, 1000);
                    }
                }, index * 1500);
            });
        }

        // Mood messages
        const moodMessages = {
            'ğŸ˜Š': '×›×œ ×”×›×‘×•×“! ×××©×™×š ×›×›×”! ××ª×” ××“×”×™×! ğŸŒŸ',
            'ğŸ˜¢': '×–×” ×‘×¡×“×¨ ×œ×”×™×•×ª ×¢×¦×•×‘. ××ª×” ×—×–×§ ×™×•×ª×¨ ×××” ×©××ª×” ×—×•×©×‘ ğŸ’™',
            'ğŸ˜ ': '×›×¢×¡ ×–×” ×¨×’×© ×ª×§×™×Ÿ. × ×©×•× ×¢××•×§ ×•× ×©×—×¨×¨ ğŸŒŠ',
            'ğŸ˜°': '××ª×” ×œ× ×œ×‘×“. ×× ×—× ×• ×›××Ÿ ×‘×©×‘×™×œ×š ×ª××™×“ ğŸ¤—',
            'ğŸ¤—': '××™×–×” ×›×™×£! ×—×™×‘×•×§ ×’×“×•×œ ×‘×—×–×¨×”! ğŸ’•',
            'ğŸ˜”': '×™××™× ×§×©×™× ×¢×•×‘×¨×™×. ××ª×” ×××™×¥ ×•× ×¤×œ× ğŸŒˆ',
            'ğŸ¥º': '××ª×” × ×¤×œ× ×‘×“×™×•×§ ×›××• ×©××ª×”. ×–×›×•×¨ ××ª ×–×”! â­',
            'ğŸ’ª': '×•×•××•! ××™×–×” ×›×•×—! ××ª×” ×œ×•×—× ×××™×ª×™! ğŸ¦'
        };

        function selectMood(button, mood) {
            // Remove previous selection
            document.querySelectorAll('.mood-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Select current
            button.classList.add('selected');
            
            // Show message
            const box = document.getElementById('encouragementBox');
            box.textContent = moodMessages[mood];
            box.style.animation = 'none';
            setTimeout(() => {
                box.style.animation = 'fadeIn 0.5s ease';
            }, 10);
            
            // Add courage point
            addCouragePoint();
            
            // Create floating hearts
            createFloatingHearts();
        }

        function addCouragePoint() {
            couragePoints++;
            localStorage.setItem('couragePoints', couragePoints);
            document.getElementById('couragePoints').textContent = couragePoints;
            
            // Animate number
            const numberEl = document.getElementById('couragePoints');
            numberEl.style.animation = 'none';
            setTimeout(() => {
                numberEl.style.animation = 'pulse 0.5s ease';
            }, 10);
        }

        function createFloatingHearts() {
            const hearts = ['ğŸ’™', 'ğŸ’œ', 'ğŸ’š', 'ğŸ’›', 'ğŸ§¡', 'â¤ï¸'];
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'floating-hearts';
                    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.left = Math.random() * window.innerWidth + 'px';
                    heart.style.top = window.innerHeight + 'px';
                    document.body.appendChild(heart);
                    
                    setTimeout(() => {
                        heart.remove();
                    }, 3000);
                }, i * 200);
            }
        }

        // Breathing Exercise
        let breathingInterval;
        function startBreathing() {
            const exercise = document.getElementById('breathingExercise');
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            
            exercise.classList.add('active');
            
            // ×”×ª×—×œ ××’×•×“×œ ×§×˜×Ÿ
            circle.style.transform = 'scale(1)';
            circle.style.transition = 'none';
            
            let phase = 0;
            const phases = [
                { text: '×©××£ ×¤× ×™××”... 1...2...3...4', duration: 4000, scale: 1.3, animate: true },      // ×’×“×œ ×œ××˜
                { text: '×¢×¦×•×¨... 1...2...3...4', duration: 4000, scale: 1.3, animate: false },          // × ×©××¨ ×’×“×•×œ
                { text: '× ×©×•×£ ×”×—×•×¦×”... 1...2...3...4', duration: 4000, scale: 1, animate: true },       // ×§×˜×Ÿ ×œ××˜
                { text: '×¢×¦×•×¨... 1...2', duration: 2000, scale: 1, animate: false }                     // × ×©××¨ ×§×˜×Ÿ
            ];
            
            function runPhase() {
                const currentPhase = phases[phase];
                text.textContent = currentPhase.text;
                
                // ×× ×¦×¨×™×š ×× ×™××¦×™×” - ×”×•×¡×£ transition
                if (currentPhase.animate) {
                    circle.style.transition = 'transform 4s ease-in-out';
                } else {
                    circle.style.transition = 'none';
                }
                
                // ×©× ×” ××ª ×”×’×•×“×œ
                setTimeout(() => {
                    circle.style.transform = `scale(${currentPhase.scale})`;
                }, 10);
                
                setTimeout(() => {
                    phase = (phase + 1) % phases.length;
                    if (document.getElementById('breathingExercise').classList.contains('active')) {
                        runPhase();
                    }
                }, currentPhase.duration);
            }
            
            runPhase();
        }

        function stopBreathing() {
            document.getElementById('breathingExercise').classList.remove('active');
            const circle = document.getElementById('breathingCircle');
            circle.style.transform = 'scale(1)';
            circle.style.transition = 'none';
        }

        function showStory() {
            const stories = [
                {
                    title: 'ğŸ“– ×¡×™×¤×•×¨ ×¢×œ ×“× ×™',
                    content: `×“× ×™ ×”×™×” ×™×œ×“ ×‘×Ÿ 11 ×©×—×•×•×” ×—×¨× ×‘×›×™×ª×”. ×”×•× ×—×©×‘ ×©×”×•× ×œ×‘×“, ××‘×œ ×’×™×œ×” ×©×™×© ×¢×•×“ ×™×œ×“×™× ×©×¢×•×‘×¨×™× ××ª ×–×”.

×‘×”×ª×—×œ×”, ×“× ×™ ×”×™×” ×¢×¦×•×‘ ×××•×“. ×”×•× ×œ× ×”×‘×™×Ÿ ×œ××” ×–×” ×§×•×¨×” ×œ×•. ××‘×œ ×™×•× ××—×“, ×”××•×¨×” ×©×œ×• ×©××” ×œ×‘ ×©×”×•× ×™×•×©×‘ ×œ×‘×“ ×‘×”×¤×¡×§×”.

×”××•×¨×” ×“×™×‘×¨×” ××™×ª×• ×•×¢×–×¨×” ×œ×• ×œ×”×‘×™×Ÿ ×©×–×” ×œ× ×‘××©××ª×•. ×“× ×™ ×”×ª×—×™×œ ×œ×”×ª××§×“ ×‘×“×‘×¨×™× ×©×”×•× ××•×”×‘ - ×¦×™×•×¨ ×•××•×–×™×§×”.

×”×•× ×”×¦×˜×¨×£ ×œ××•×¢×“×•×Ÿ ×”××× ×•×ª ×‘×‘×™×ª ×”×¡×¤×¨ ×•××¦× ×©× ×™×œ×“×™× ××—×¨×™× ×¢× ×ª×—×•××™ ×¢× ×™×™×Ÿ ×“×•××™×. ××˜ ××˜, ×”×•× ××¦× ×—×‘×¨×™× ×—×“×©×™× ×©×”×¢×¨×™×›×• ××•×ª×•.

×”×™×•×, ×“× ×™ ×‘×Ÿ 16 ×•×”×•× ×¢×•×–×¨ ×œ×™×œ×“×™× ××—×¨×™× ×©×¢×•×‘×¨×™× ×—×¨×. ×”×•× ×œ××“ ×©×”×›×•×— ×©×œ×• ×”×•× ×‘×™×™×—×•×“×™×•×ª ×©×œ×•!

ğŸŒŸ ×’× ××ª×” ×ª×¢×‘×•×¨ ××ª ×–×”! ××ª×” ×—×–×§ ×•× ×¤×œ×! ğŸ’ª`
                },
                {
                    title: 'ğŸ“– ×¡×™×¤×•×¨ ×¢×œ ××™×”',
                    content: `××™×” ×”×™×™×ª×” ×™×œ×“×” ×—×›××” ×•××™×•×—×“×ª ×‘×›×™×ª×” ×—'. ×™×•× ××—×“, ×‘×œ×™ ×¡×™×‘×” ×‘×¨×•×¨×”, ×”×™×œ×“×™× ×‘×›×™×ª×” ×”×ª×—×™×œ×• ×œ×”×ª×¢×œ× ××× ×”.

××™×” ×”×¨×’×™×©×” ×××•×“ ×œ×‘×“ ×•×¢×¦×•×‘×”. ×”×™× ×œ× ×¨×¦×ª×” ×œ×œ×›×ª ×œ×‘×™×ª ×”×¡×¤×¨. ××‘×œ ×”××× ×©×œ×” ×¢×–×¨×” ×œ×” ×œ×”×‘×™×Ÿ ×©×”×™× ×œ× ×œ×‘×“.

××™×” ×”×ª×—×™×œ×” ×œ×›×ª×•×‘ ×™×•××Ÿ ×¢×œ ×”×¨×’×©×•×ª ×©×œ×”. ×–×” ×¢×–×¨ ×œ×” ×œ×”×•×¦×™× ××ª ×”×›×¢×¡ ×•×”×¢×¦×‘. ×”×™× ×’× ×“×™×‘×¨×” ×¢× ×™×•×¢×¦×ª ×‘×™×ª ×”×¡×¤×¨.

×”×™× ××¦××” ×›×•×— ×‘×ª×—×‘×™×‘×™× ×©×œ×” - ×§×¨×™××” ×•×›×ª×™×‘×”. ×”×™× ××¤×™×œ×• ×”×ª×—×™×œ×” ×œ×›×ª×•×‘ ×¡×™×¤×•×¨×™× ××©×œ×”!

×”×™×•× ××™×” ×”×™× ×¡×•×¤×¨×ª ××¦×œ×™×—×” ×©×›×•×ª×‘×ª ×¡×¤×¨×™× ×œ×‘× ×™ × ×•×¢×¨. ×”×™× ××•××¨×ª: "×”×—×¨× ×¢×–×¨ ×œ×™ ×œ×”×›×™×¨ ××ª ×¢×¦××™ ×•×œ×”×‘×™×Ÿ ××” ×‘×××ª ×—×©×•×‘ ×œ×™."

ğŸ’œ ×–×›×•×¨: ×”×§×•×©×™ ×©×œ×š ×”×™×•× ×™×”×¤×•×š ×œ×›×•×— ×©×œ×š ××—×¨! ğŸ’œ`
                }
            ];
            
            const story = stories[Math.floor(Math.random() * stories.length)];
            showContent(story.title, story.content);
        }

        function showGame() {
            const games = [
                {
                    title: 'ğŸ® ××©×—×§: ×¡×¤×•×¨ ××ª ×”×›×•×›×‘×™×!',
                    content: `â­â­â­â­â­â­â­

×›××” ×›×•×›×‘×™× ×¨××™×ª? 7!

×›×œ ×›×•×›×‘ ××™×™×¦×’ ×“×‘×¨ × ×¤×œ× ×©×™×© ×‘×š:

â­ ××ª×” ×××™×¥ - ×›×™ ××ª×” ×××©×™×š ×›×œ ×™×•×
â­ ××ª×” ×—×›× - ×™×© ×œ×š ××•×— ××“×”×™×
â­ ××ª×” ××™×•×—×“ - ××™×Ÿ ××£ ××—×“ ×›××•×š
â­ ××ª×” ×—×–×§ - ×¢×‘×¨×ª ×™××™× ×§×©×™×
â­ ××ª×” × ×¤×œ× - ×‘×“×™×•×§ ×›××• ×©××ª×”
â­ ×™×© ×œ×š ×œ×‘ ×˜×•×‘ - ××ª×” ××“× ×˜×•×‘
â­ ×™×© ×œ×š ×¢×ª×™×“ ××–×”×™×¨ - ×–×” ×¨×§ ×”×ª×—×œ×”

×–×›×•×¨ ××ª ×”×›×•×›×‘×™× ×”××œ×” ×›×œ ×™×•×! ğŸ’™`
                },
                {
                    title: 'ğŸ® ××©×—×§: ××¦× ××ª ×”××™×œ×” ×”×—×™×•×‘×™×ª!',
                    content: `×‘×ª×•×š ×”××™×œ×™× ×”××œ×” ×™×© ××™×œ×” ××™×•×—×“×ª ×‘×©×‘×™×œ×š:

ğŸŒŸ ×××™×¥
ğŸŒŸ ××•×›×©×¨
ğŸŒŸ ×—×›×
ğŸŒŸ ×™×¤×”
ğŸŒŸ ××¦×—×™×§
ğŸŒŸ ×™×¦×™×¨×ª×™
ğŸŒŸ ×˜×•×‘ ×œ×‘
ğŸŒŸ × ×¤×œ×

××™×–×• ××™×œ×” ××ª××¨×ª ××•×ª×š ×”×›×™ ×˜×•×‘?

ğŸ’¡ ×”×¡×•×“: ×›×œ ×”××™×œ×™× ××ª××¨×•×ª ××•×ª×š!

××ª×” ×›×œ ××œ×” ×•×’× ×™×•×ª×¨! ğŸŒˆ`
                }
            ];
            
            const game = games[Math.floor(Math.random() * games.length)];
            showContent(game.title, game.content);
        }

        function showTips() {
            const content = `1. ğŸ—£ï¸ ×“×‘×¨ ×¢× ××‘×•×’×¨ ×©××ª×” ×¡×•××š ×¢×œ×™×•
   ×”×”×•×¨×™×, ×”××•×¨×”, ××• ×”×™×•×¢×¦×ª - ×”× ×¨×•×¦×™× ×œ×¢×–×•×¨!

2. ğŸ“” ×›×ª×•×‘ ×™×•××Ÿ ×¨×’×©×•×ª
   ×ª×›×ª×•×‘ ××™×š ××ª×” ××¨×’×™×© - ×–×” ×¢×•×–×¨ ×œ×”×•×¦×™× ××ª ×”×¨×’×©×•×ª

3. ğŸ¨ ×ª××¦× ×ª×—×‘×™×‘ ×©××ª×” ××•×”×‘
   ×¦×™×•×¨, ××•×–×™×§×”, ×¡×¤×•×¨×˜ - ××©×”×• ×©×¢×•×©×” ××•×ª×š ×©××—

4. ğŸ’­ ×ª×–×›×•×¨ - ×–×” ×œ× ×‘××©××ª×š!
   ××ª×” ×œ× ×¢×©×™×ª ×©×•× ×“×‘×¨ ×¨×¢. ×”×‘×¢×™×” ×”×™× ××¦×œ ×”××—×¨×™×

5. ğŸŒŸ ×ª×”×™×” ×’××” ×‘×¢×¦××š ×›×œ ×™×•×
   ×ª××¦× ××©×”×• ××—×“ ×˜×•×‘ ×©×¢×©×™×ª ×”×™×•×

6. ğŸŒ¬ï¸ ×ª× ×©×•× ×¢××•×§ ×›×©×§×©×”
   × ×©×™××•×ª ×¢××•×§×•×ª ×¢×•×–×¨×•×ª ×œ×”×¨×’×™×¢

7. ğŸ‘¥ ×ª×—×¤×© ×—×‘×¨×™× ×‘××§×•××•×ª ××—×¨×™×
   ××•×¢×“×•× ×™×, ×¤×¢×™×œ×•×™×•×ª, ×©×›×•× ×” - ×™×© ×¢×•×“ ×™×œ×“×™× ×˜×•×‘×™×!

8. ğŸ“ ×ª×“×‘×¨ ×¢× ×¢×¨"×Ÿ ×× ×§×©×”
   ×—×™×™×’ 1201 - ×”× ×©× ×‘×©×‘×™×œ×š ×ª××™×“

9. ğŸ’ª ×ª×–×›×•×¨ ×©××ª×” ×—×–×§
   ×›×œ ×™×•× ×©××ª×” ×¢×•×‘×¨ ×”×•× ×”×•×›×—×” ×œ×›×•×— ×©×œ×š

10. ğŸŒˆ ×ª×–×›×•×¨ - ×–×” ×™×¢×‘×•×¨!
    ×”××¦×‘ ×”×–×” ×–×× ×™. ×™×‘×•××• ×™××™× ×˜×•×‘×™×!

××ª×” ×œ× ×œ×‘×“! ğŸ’™`;
            
            showContent('ğŸ’¡ 10 ×˜×™×¤×™× ×©×™×¢×–×¨×• ×œ×š', content);
        }

        function showContent(title, content) {
            document.getElementById('contentTitle').textContent = title;
            document.getElementById('contentBody').textContent = content;
            document.getElementById('contentModal').classList.add('active');
        }

        function closeContentModal() {
            document.getElementById('contentModal').classList.remove('active');
        }

        // Prevent page unload while breathing
        window.addEventListener('beforeunload', (e) => {
            if (document.getElementById('breathingExercise').classList.contains('active')) {
                e.preventDefault();
                e.returnValue = '';
                return '×ª×¨×’×™×œ ×”× ×©×™××” ×¢×“×™×™×Ÿ ×¤×¢×™×œ';
            }
        });
    </script>
</body>
</html>